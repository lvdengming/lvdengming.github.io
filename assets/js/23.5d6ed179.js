(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{420:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("p",[s._v("本文将介绍如何在 Mac 环境下通过 "),t("a",{attrs:{href:"https://iterm2.com/",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("iTerm2"),t("OutboundLink")],1),s._v(" 连接远程服务器")]),s._v(" "),t("h2",{attrs:{id:"购买服务器-若已有服务器-请忽略本节"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#购买服务器-若已有服务器-请忽略本节"}},[s._v("#")]),s._v(" 购买服务器（若已有服务器，请忽略本节）")]),s._v(" "),t("p",[s._v("国内通常在"),t("a",{attrs:{href:"https://cn.aliyun.com/",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("阿里云"),t("OutboundLink")],1),s._v("、"),t("a",{attrs:{href:"https://cloud.tencent.com/",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("腾讯云"),t("OutboundLink")],1),s._v("、"),t("a",{attrs:{href:"https://www.huaweicloud.com/",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("华为云"),t("OutboundLink")],1),s._v("等服务商上购买弹性云服务器。选择需要的 CPU 核数、运行内存、硬盘、带宽、区域等参数购买即可")]),s._v(" "),t("h2",{attrs:{id:"创建连接脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建连接脚本"}},[s._v("#")]),s._v(" 创建连接脚本")]),s._v(" "),t("p",[s._v("在某一路径下创建连接远程服务器的脚本，添加以下内容：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/expect")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" HOST your_server_ip\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" PORT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" root\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" PASSWORD your_server_root_password\n\nspawn "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PORT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expect")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*password:*"')]),s._v("\nsend "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWORD")]),t("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[s._v("\\r")]),s._v('"')]),s._v("\n\ninteract\n")])])]),t("blockquote",[t("p",[s._v("服务器密码如果遗忘，可到个人控制台页面进行重置")]),s._v(" "),t("p",[s._v("最基础的脚本即是如此，若有更复杂的操作，可查询 "),t("code",[s._v("expect")]),s._v(" 相关知识")])]),s._v(" "),t("h2",{attrs:{id:"设置命令别名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置命令别名"}},[s._v("#")]),s._v(" 设置命令别名")]),s._v(" "),t("p",[s._v("1、通过 "),t("code",[s._v("chmod +x your_script")]),s._v(" 命令，给创建的脚本添加可执行权限")]),s._v(" "),t("p",[s._v("2、在终端配置文件中添加别名，以 "),t("code",[s._v("zsh")]),s._v(" 终端为例，在 "),t("code",[s._v("~/.zshrc")]),s._v(" 文件中添加以下内容")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("your_alias")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your_script_path"')]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("配置文件通常存放在用户目录下（"),t("code",[s._v("~")]),s._v("），以 "),t("code",[s._v(".xrc")]),s._v(" 形式命名，例如 "),t("code",[s._v(".bashrc")]),s._v("、"),t("code",[s._v(".zshrc")])]),s._v(" "),t("p",[s._v("配置文件也是一个可执行的脚本，会在启动终端（例如 iTerm2）之前自动执行")])]),s._v(" "),t("p",[s._v("3、重启 iTerm2")]),s._v(" "),t("h2",{attrs:{id:"连接远程服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接远程服务器"}},[s._v("#")]),s._v(" 连接远程服务器")]),s._v(" "),t("p",[s._v("在任意目录下，执行 "),t("code",[s._v("your_alias")]),s._v(" 命令即可连接远程服务器")]),s._v(" "),t("h2",{attrs:{id:"设置连接状态保持时长"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置连接状态保持时长"}},[s._v("#")]),s._v(" 设置连接状态保持时长")]),s._v(" "),t("p",[s._v("参考自："),t("a",{attrs:{href:"http://bluebiu.com/blog/iterm2-ssh-session-idle.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("http://bluebiu.com/blog/iterm2-ssh-session-idle.html"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("Mac 设置方式如下：")]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("~/.ssh/config")]),s._v(" 中添加以下内容：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让所有 SSH 会话保持连接，不自动断开")]),s._v("\nHOST *\n  ServerAliveInterval "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n")])])]),t("p",[s._v("其中:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("HOST *")]),s._v(" 表示通过 ssh 连接的所有主机，可以将 "),t("code",[s._v("*")]),s._v(" 修改为指定 IP，并且可以设置多个")]),s._v(" "),t("li",[t("code",[s._v("ServerAliveInterval 60")]),s._v(" 表示 ssh 客户端每隔 60 秒给远程主机发送一个 no-op 包，no-op 是无任何操作的意思，这样远程主机就不会关闭这个 SSH 会话")])])])}),[],!1,null,null,null);t.default=r.exports}}]);
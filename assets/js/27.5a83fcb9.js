(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{425:function(t,n,e){"use strict";e.r(n);var a=e(2),r=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),n("p",[t._v("本文介绍了如何在服务器部署前端服务")]),t._v(" "),n("h2",{attrs:{id:"通过-nginx-部署服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过-nginx-部署服务"}},[t._v("#")]),t._v(" 通过 nginx 部署服务")]),t._v(" "),n("p",[t._v("参考文档：")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://blog.csdn.net/name_is_wl/article/details/52958472",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("nginx 静态资源服务器简单配置"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://tsejx.github.io/devops-guidebook/server/nginx/static-resource-server/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("静态资源服务器"),n("OutboundLink")],1)])]),t._v(" "),n("h3",{attrs:{id:"在服务器上创建网站"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在服务器上创建网站"}},[t._v("#")]),t._v(" 在服务器上创建网站")]),t._v(" "),n("p",[t._v("可通过以下方式进行创建：")]),t._v(" "),n("ol",[n("li",[t._v("在服务器上直接创建一个 html 文件，编辑内容")]),t._v(" "),n("li",[t._v("通过 "),n("code",[t._v("scp")]),t._v("、"),n("code",[t._v("ftp/sftp")]),t._v(" 将本地网站上传到服务器，具体可参考 "),n("RouterLink",{attrs:{to:"/operation-system/transmit.html"}},[t._v("文件传输")]),t._v(" 章节")],1),t._v(" "),n("li",[t._v("通过 git 一个网页代码仓库到服务器，在服务器上安装 git 可参考 "),n("RouterLink",{attrs:{to:"/operation-system/initialize.html#安装-git"}},[t._v("搭建服务器环境 - 安装 Git")]),t._v(" 章节")],1),t._v(" "),n("li",[t._v("……")])]),t._v(" "),n("p",[t._v("注意：nginx 启动用户默认不是 root，而是 nginx，请确保该用户对网站文件具有访问权限（可在 nginx.conf 文件 user 字段处进行查看）")]),t._v(" "),n("blockquote",[n("p",[t._v("如果不熟悉配置，网站不要放在 "),n("code",[t._v("/root")]),t._v(" 下")])]),t._v(" "),n("h3",{attrs:{id:"配置-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx"}},[t._v("#")]),t._v(" 配置 nginx")]),t._v(" "),n("p",[t._v("配置文件位于 "),n("code",[t._v("nginx 安装目录/nginx.conf")]),t._v("，在 CentOS 7.9 版本通过 "),n("code",[t._v("yum")]),t._v(" 安装 nginx，配置文件默认位于 "),n("code",[t._v("/etc/nginx/nginx.conf")]),t._v("。如何在服务器安装 nginx 可参考 "),n("RouterLink",{attrs:{to:"/operation-system/initialize.html#安装-nginx"}},[t._v("搭建服务器环境 - 安装 nginx")]),t._v(" 章节")],1),t._v(" "),n("p",[t._v("在 "),n("code",[t._v("http")]),t._v(" 中添加如下内容：")]),t._v(" "),n("div",{staticClass:"language-conf extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server {\n  # 端口号\n  listen      80;\n  # 匹配请求的 host 值（localhost 表示当前主机）\n  server_name localhost;\n\n  # 监听请求路径\n  location / {\n    # 查找目录（网站存放目录，例如 /root/hello-world）\n    root  website_path;\n    # 默认查找\n    index index.html index.htm;\n  }\n}\n")])])]),n("p",[t._v("配置完成后，执行 "),n("code",[t._v("nginx -t")]),t._v(" 查看参数配置是否有错误，错误、成功案例如下：")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2023/03/05/e2kW3r8Jlj6gwp4.png",alt:"image.png"}})]),t._v(" "),n("p",[t._v("配置成功后，执行 "),n("code",[t._v("nginx -s reload")]),t._v(" 命令更新 nginx 配置文件")]),t._v(" "),n("h3",{attrs:{id:"验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[t._v("#")]),t._v(" 验证")]),t._v(" "),n("p",[t._v("直接在浏览器中输入服务器 IP、端口号进行验证，查看网站是否能正常加载")]),t._v(" "),n("p",[t._v("若网站不能正常加载，可通过 nginx 日志文件查看报错原因")]),t._v(" "),n("p",[t._v("日志默认存放于 "),n("code",[t._v("/var/log/nginx/error.log")]),t._v("，可在 nginx.conf 文件中进行查看和配置")]),t._v(" "),n("h3",{attrs:{id:"常见错误"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[t._v("#")]),t._v(" 常见错误")]),t._v(" "),n("p",[t._v("1、html 文件存放在 "),n("code",[t._v("/root")]),t._v(" 目录下，导致 "),n("code",[t._v("nginx")]),t._v(" 用户无法访问")]),t._v(" "),n("p",[t._v("解决方案：将 html 文件放到其它目录，例如 "),n("code",[t._v("/home/nginx")]),t._v(" 目录下")]),t._v(" "),n("p",[t._v("2、"),n("code",[t._v("80")]),t._v(" 端口无法正常访问，这是由于 nginx 默认配置会使用 "),n("code",[t._v("80")]),t._v(" 端口")]),t._v(" "),n("p",[t._v("解决方案：修改 nginx 默认配置文件 "),n("code",[t._v("/etc/nginx/conf.d/default.conf")]),t._v(" server 端口号，例如将 "),n("code",[t._v("listen 80")]),t._v(" 改为 "),n("code",[t._v("listen 8000")])]),t._v(" "),n("h3",{attrs:{id:"常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证配置正确性")]),t._v("\nnginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 退出服务")]),t._v("\nnginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" quit\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 立即关闭服务")]),t._v("\nnginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" stop\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启服务")]),t._v("\nnginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" reload\n")])])]),n("h2",{attrs:{id:"通过-docker-nginx-部署服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过-docker-nginx-部署服务"}},[t._v("#")]),t._v(" 通过 docker & nginx 部署服务")]),t._v(" "),n("p",[t._v("官方文档："),n("a",{attrs:{href:"https://hub.docker.com/_/nginx",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("https://hub.docker.com/_/nginx"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=r.exports}}]);